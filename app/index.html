<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Electron连接MySQL并代入查询</title>
</head>
<body>
  <h1>连接MySQL并代入查询</h1>
  <form id="connection-form">
    <label for="host">主机:</label>
    <input type="text" id="host" name="host" value="localhost">
    <br>
    <label for="user">用户名:</label>
    <input type="text" id="user" name="user" value="root">
    <br>
    <label for="password">密码:</label>
    <input type="password" id="password" name="password">
    <br>
    <label for="database">数据库:</label>
    <input type="text" id="database" name="database" value="test">
    <br>
    <br>
    <button type="submit">连接</button>
  </form>

  <br>
  <h1>查询</h1>
  <form id="query-form">
    <label for="query">查询语句:</label>
    <input type="text" id="query" name="query" value="SELECT * FROM users">
    <br>
    <br>
    <button type="submit">查询</button>
  </form>

  <script>
  const { ipcRenderer } = require('electron');

  const connectionForm = document.getElementById('connection-form');
  const queryForm = document.getElementById('query-form');

  // 连接到数据库
  connectionForm.addEventListener('submit', (event) => {
    event.preventDefault();

    const formData = new FormData(connectionForm);

    // 将表单数据发送到主进程
    ipcRenderer.send('connect-to-mysql', Object.fromEntries(formData));
  });

  // 执行查询
  queryForm.addEventListener('submit', (event) => {
    event.preventDefault();

    const formData = new FormData(queryForm);

    const query = formData.get('query');

    // 将查询语句和数据库连接信息发送到主进程
    ipcRenderer.send('query-mysql', Object.fromEntries(formData));
  });

  ipcRenderer.on('results', (event, results) => {
    // 显示查询结果
    console.log(results);
  });

  ipcRenderer.on('error', (event, error) => {
    // 显示错误信息
    console.error(error);
  });
